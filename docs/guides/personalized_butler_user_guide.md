# Персонализированный Butler — Руководство пользователя

## Что такое персонализированный Butler?

Butler теперь помнит вас и ваши предыдущие разговоры! Бот использует персону "Alfred-style дворецкий" (вежливый, ироничный, заботливый, как Alfred из Batman).

## Как это работает

### Автоматическая персонализация

- **Включено автоматически**: Персонализация работает для всех ваших сообщений
- **Память**: Butler помнит последние 50 сообщений
- **Persona**: Ответы в стиле Alfred (английский юмор, русский язык)

### Примеры взаимодействия

**Обычный запрос**:
```
You: Привет!
Butler: Добрый день, сэр. Надеюсь, день проходит без излишней драмы? Чем могу быть полезен?
```

**С контекстом**:
```
You: Расскажи про Python
Butler: (подробный ответ про Python)

You: А какие есть библиотеки?
Butler: Раз уж мы говорим о Python, позвольте рассказать о наиболее популярных библиотеках...
```

### Голосовые сообщения

Butler поддерживает голосовые сообщения:

1. Отправьте голосовое сообщение
2. Butler распознает речь (Whisper STT)
3. Отвечает текстом в стиле Alfred

## Память

### Как Butler запоминает

- **50 последних сообщений**: Butler помнит ваши последние разговоры
- **Автоматическое сжатие**: Старые сообщения сжимаются в краткую сводку
- **Извлечение интересов**: Butler автоматически определяет ваши интересы из разговоров (3-7 ключевых тем)
- **90 дней**: История автоматически удаляется через 90 дней

### Извлечение интересов

Butler анализирует ваши разговоры и автоматически определяет ваши интересы (например, "Python", "Docker", "AI"). Эти интересы учитываются при формировании ответов, чтобы Butler мог лучше понимать контекст ваших вопросов.

### Сброс памяти

Если хотите начать заново, обратитесь к администратору для сброса профиля.

## Конфиденциальность

- **Локальное хранение**: Все данные хранятся локально в MongoDB (не отправляются в external SaaS)
- **Автоудаление**: История автоматически удаляется через 90 дней
- **Безопасность**: Доступ только у вас и администраторов системы

## Типичные вопросы

### Почему Butler отвечает в стиле Alfred?

Это персона по умолчанию для всех пользователей. Она создана для того, чтобы делать взаимодействие более живым и интересным, сохраняя при этом профессионализм.

### Можно ли изменить персону?

В текущей версии персона фиксирована. Возможность настройки появится в будущих обновлениях.

### Что делать, если Butler ведет себя странно?

Обратитесь к администратору для сброса вашего профиля. Это удалит всю историю и вернет настройки по умолчанию.

### Работает ли персонализация с командами?

Да! Персонализация работает со всеми текстовыми и голосовыми сообщениями, включая команды для работы с дайджестами, домашними заданиями и т.д.

## Технические детали

### Модель

- **LLM**: Qwen-7B (локальная модель)
- **STT**: Whisper base model (для голосовых сообщений)
- **Язык**: Optimized для русского языка

### Ограничения

- **Память**: Максимум 50 сообщений (старые сжимаются)
- **Длина сообщения**: Ограничения Telegram (до 4096 символов)
- **Голос**: Только текстовые ответы (без синтеза речи)

## Поддержка

По вопросам и проблемам обращайтесь к администраторам системы.

---

**Версия**: 2.0  
**Дата обновления**: 2025-11-18  
**Статус**: ✅ День 25 завершён — добавлено извлечение интересов (Task 16)

